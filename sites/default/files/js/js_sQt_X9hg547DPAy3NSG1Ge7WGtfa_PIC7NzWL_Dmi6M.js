/* @license GPL-2.0-or-later https://www.drupal.org/licensing/faq */
(function(Drupal,once){let isMobile=window.innerWidth<992;let mouseEventsEnabled=true;Drupal.behaviors.ohioHeaderMenuBehavior={attach:(context)=>{once('ohioHeaderMainMenuBehavior','#header-top',context).forEach((element)=>{Drupal.behaviors.ohioHeaderMenuBehavior.setMenuClasses(element,isMobile);Drupal.behaviors.ohioHeaderMenuBehavior.setMenuAttributes(element,isMobile);Drupal.behaviors.ohioHeaderMenuBehavior.setAuxMenuAttributes(element,isMobile);window.addEventListener("resize",()=>{const isMobileNow=window.innerWidth<992;if(isMobile!==isMobileNow){isMobile=isMobileNow;if(!isMobileNow)element.querySelectorAll('#main-menu .menu-level-1').forEach((item)=>{if(item.classList.contains('menu-item--expanded'))Drupal.behaviors.ohioHeaderMenuBehavior.toggleMainMenuClasses(item);});Drupal.behaviors.ohioHeaderMenuBehavior.setMenuClasses(element,isMobile);Drupal.behaviors.ohioHeaderMenuBehavior.setMenuAttributes(element,isMobile);Drupal.behaviors.ohioHeaderMenuBehavior.setAuxMenuAttributes(element,isMobile);}});element.onmousemove=()=>{if(!mouseEventsEnabled){mouseEventsEnabled=true;element.querySelectorAll('#main-menu .menu-level-1.menu-item--expanded').forEach((item)=>{Drupal.behaviors.ohioHeaderMenuBehavior.toggleMainMenuClasses(item);});element.querySelectorAll('.top-green-bar-links li.hasMenu').forEach((item)=>{const section=item.querySelector('section');if(!section.classList.contains('closed'))Drupal.behaviors.ohioHeaderMenuBehavior.toggleAuxMenuClasses(item);});document.activeElement.blur();}};});},setMenuClasses:(element,isMobile)=>{const mainMenuContainer=element.querySelector('.top-links > .menu');const mainMenu=element.querySelector('#main-menu');const mobileNavIcon=element.querySelector('#mobile-nav > span.fa');if(isMobile){mainMenu.classList.add('mobile-menu');mainMenuContainer.classList.add('closed');}else{mainMenu.classList.remove('mobile-menu');mainMenuContainer.classList.remove('closed');document.querySelector('html').classList.remove('overflow-hidden');const headerRegion=document.querySelector('.region-header');if(headerRegion)headerRegion.classList.remove('menu-container');if(mobileNavIcon.classList.contains('fa-close')){mobileNavIcon.classList.toggle('fa-close');mobileNavIcon.classList.toggle('fa-bars');}}},toggleMainMenuClasses:(item)=>{const nestedMenus=item.querySelectorAll('.nested-menu');nestedMenus.forEach((menu)=>{if(!menu.parentElement.classList.contains('menu-level-2'))menu.classList.toggle('closed');if(menu.getAttribute('aria-hidden')==='false')menu.setAttribute('aria-hidden','true');else menu.setAttribute('aria-hidden','false');});item.classList.toggle('menu-item--collapsed');item.classList.toggle('menu-item--expanded');const button=item.querySelector('.link-wrapper button');button.classList.toggle('hover');if(button.getAttribute('aria-expanded')=='false')button.setAttribute('aria-expanded','true');else button.setAttribute('aria-expanded','false');},setMenuAttributes:(element,isMobile)=>{element.querySelectorAll('#main-menu .menu-level-1').forEach((item)=>{if(!isMobile){const anyMegaMenus=item.querySelectorAll('.menu-level-3');const nestedMenu=item.querySelector('.nested-menu');if(!anyMegaMenus.length){item.classList.add('single-menu');if(nestedMenu!==null){nestedMenu.style.setProperty('left',`${-150+(item.offsetWidth/2)}px`);const lastLevelTwoMenu=nestedMenu.querySelector('.menu-level-2:last-of-type');if(lastLevelTwoMenu)lastLevelTwoMenu.onkeydown=(e)=>{if(e.keyCode==9){Drupal.behaviors.ohioHeaderMenuBehavior.toggleMainMenuClasses(item);mouseEventsEnabled=false;}};const levelTwoFirstChild=nestedMenu.querySelector('.menu-level-2:first-child');levelTwoFirstChild.onkeydown=(e)=>{if(e.shiftKey&&e.keyCode==9&&document.activeElement==levelTwoFirstChild.querySelector('a')){Drupal.behaviors.ohioHeaderMenuBehavior.toggleMainMenuClasses(item);mouseEventsEnabled=false;}};}}else{const children=nestedMenu.children.length;const centerHelp=(children==4?50:children==3?250:children==2?360+item.offsetLeft-(item.offsetLeft/4):children==1?360+item.offsetLeft-(item.offsetLeft/4):0);nestedMenu.style.setProperty('left',`${-item.offsetLeft-360+centerHelp}px`);const lastLevelThreeMenu=nestedMenu.querySelector('.menu-level-2:last-of-type .nested-menu .menu-level-3:last-of-type');if(lastLevelThreeMenu)lastLevelThreeMenu.onkeydown=(e)=>{if(e.keyCode==9){Drupal.behaviors.ohioHeaderMenuBehavior.toggleMainMenuClasses(item);mouseEventsEnabled=false;}};const levelThreeFirstChild=nestedMenu.querySelector('.menu-level-2:first-child .nested-menu .menu-level-3:first-child');if(levelThreeFirstChild)levelThreeFirstChild.onkeydown=(e)=>{if(e.shiftKey&&e.keyCode==9&&document.activeElement==levelThreeFirstChild.querySelector('a')){Drupal.behaviors.ohioHeaderMenuBehavior.toggleMainMenuClasses(item);mouseEventsEnabled=false;}};}}item.querySelectorAll('.link-wrapper').forEach((wrapper)=>{const anchors=wrapper.getElementsByTagName('a');if(anchors.length){for(let i=0;i<anchors.length;i++)anchors[i].onclick=(e)=>{if(!anchors[i].getAttribute('href'))e.preventDefault();};}const button=wrapper.querySelector('button');if(isMobile){item.onmouseenter=null;item.onmouseleave=null;button.onclick=()=>Drupal.behaviors.ohioHeaderMenuBehavior.toggleMainMenuClasses(item);}else{button.onclick=null;item.addEventListener('mouseenter',(e)=>{const nestedMenu=item.querySelector('.nested-menu');const levelOneMenus=document.querySelectorAll('.menu-level-1');levelOneMenus.forEach((menu)=>{if(menu!==this&&menu.classList.contains('menu-item--expanded'))Drupal.behaviors.ohioHeaderMenuBehavior.toggleMainMenuClasses(menu);});if(nestedMenu.classList.contains('closed'))Drupal.behaviors.ohioHeaderMenuBehavior.toggleMainMenuClasses(item);});item.addEventListener('mouseleave',(e)=>{setTimeout(()=>{if(item.classList.contains('menu-item--expanded')&&!item.matches(':hover')&&!item.querySelector('.nested-menu').matches(':hover'))Drupal.behaviors.ohioHeaderMenuBehavior.toggleMainMenuClasses(item);},1000);});}button.onkeydown=(e)=>{if(e.keyCode==13){e.preventDefault();Drupal.behaviors.ohioHeaderMenuBehavior.toggleMainMenuClasses(item);mouseEventsEnabled=false;}if(e.shiftKey&&e.keyCode==9&&item.classList.contains('menu-item--expanded')){Drupal.behaviors.ohioHeaderMenuBehavior.toggleMainMenuClasses(item);mouseEventsEnabled=false;}};});});},toggleAuxMenuClasses:(item)=>{const section=item.querySelector('section');section.classList.toggle('closed');if(section.getAttribute('aria-hidden')==='true')section.setAttribute('aria-hidden','false');else section.setAttribute('aria-hidden','true');section.querySelectorAll('ul').forEach((list)=>{if(list.getAttribute('aria-expanded')==='false')list.setAttribute('aria-expanded','true');else list.setAttribute('aria-expanded','false');});const button=item.querySelector('button');button.classList.toggle('hover');if(button.getAttribute('aria-expanded')=='false')button.setAttribute('aria-expanded','true');else button.setAttribute('aria-expanded','false');},setAuxMenuAttributes:(element,isMobile)=>{element.querySelectorAll('.top-green-bar-links li.hasMenu').forEach((item)=>{const chevron=item.querySelector('button i');if(isMobile){item.onmouseenter=null;item.onmouseleave=null;chevron.onclick=()=>Drupal.behaviors.ohioHeaderMenuBehavior.toggleAuxMenuClasses(item);}else{chevron.onclick=null;item.onmouseenter=()=>Drupal.behaviors.ohioHeaderMenuBehavior.toggleAuxMenuClasses(item);item.onmouseleave=()=>Drupal.behaviors.ohioHeaderMenuBehavior.toggleAuxMenuClasses(item);}item.onkeydown=(e)=>{if(e.keyCode==13){Drupal.behaviors.ohioHeaderMenuBehavior.toggleAuxMenuClasses(item);mouseEventsEnabled=false;}if(e.shiftKey&&e.keyCode==9&&!item.querySelector('section').classList.contains('closed')&&document.activeElement==item.querySelector('button')){Drupal.behaviors.ohioHeaderMenuBehavior.toggleAuxMenuClasses(item);mouseEventsEnabled=false;}};const lastList=item.querySelector('section ul:last-of-type');lastList.querySelector('li:last-of-type').onkeydown=(e)=>{if(e.keyCode==9){Drupal.behaviors.ohioHeaderMenuBehavior.toggleAuxMenuClasses(item);mouseEventsEnabled=false;}};item.querySelector('section').style.setProperty('left','-8px');});}};Drupal.behaviors.ohioHeaderSearchBehavior={attach:(context)=>{once('ohioHeaderSearchBehavior','#header-wrapper',context).forEach((element)=>{element.querySelectorAll('#search-desktop, #search-mobile, #page-dimmer, #closeSearch').forEach((item)=>{item.onclick=()=>Drupal.behaviors.ohioHeaderSearchBehavior.toggleSearchItems(element);});});},toggleSearchItems:(element)=>{const funnelbackBlock=element.querySelector('.block-funnelback-integration');const pageDimmer=element.querySelector('#page-dimmer');funnelbackBlock.classList.toggle('active');pageDimmer.classList.toggle('active');if(pageDimmer.classList.contains('active'))element.querySelector('#edit-search').focus();}};Drupal.behaviors.ohioHeaderMobileMenuBehavior={attach:(context)=>{once('ohioHeaderMobileMenuBehavior','#header-top',context).forEach((element)=>{element.querySelector('#mobile-nav').onclick=()=>Drupal.behaviors.ohioHeaderMobileMenuBehavior.toggleMobileMenuClasses(element);const mobileMenu=element.querySelector('.top-links > .menu');mobileMenu.onkeydown=(e)=>{if(e.keyCode==27)if(isMobile&&!mobileMenu.classList.contains('closed'))Drupal.behaviors.ohioHeaderMobileMenuBehavior.toggleMobileMenuClasses(element);};});},toggleMobileMenuClasses:(element)=>{const mobileNavIcon=element.querySelector('#mobile-nav > span.fa');mobileNavIcon.classList.toggle('fa-bars');mobileNavIcon.classList.toggle('fa-close');element.querySelector('.top-links > .menu').classList.toggle('closed');document.querySelector('html').classList.toggle('overflow-hidden');document.querySelector('.region-header').classList.toggle('menu-container');if(mobileNavIcon.classList.contains('fa-bars'))element.querySelectorAll('.top-links .menu li.hasMenu').forEach((item)=>{item.querySelectorAll('button.hover').forEach((button)=>{if(item.classList.contains('menu-item--expanded')){item.classList.toggle('menu-item--expanded');item.classList.toggle('menu-item--collapsed');item.querySelector('.nested-menu').classList.toggle('closed');}else item.querySelector('section').classList.toggle('closed');button.classList.toggle('hover');});});}};})(Drupal,once);;
